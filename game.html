<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>game</title>
	<style>
		canvas {
			border: 1px black solid;
		}
	</style>
</head>
<body>
	<canvas id="id-canvas" width="300" height="500"></canvas>

	<script>
		var log = console.log.bind(console);

		var imageFromPath = function(path) {
			var img = new Image();
			img.src = path;

			return img;
		}

		var Bird = function() {
			var image = imageFromPath('./img/bird.png');
			var o = {
				image: image,
				x: 150,
				y: 200,
				speed: 6,
				moveLeft: function() {
					this.x -= this.speed;
				},
				moveRight: function() {
					this.x += this.speed;
				}
 			}

			return o;
		}

		var __main = function() {
			var canvas = document.querySelector('#id-canvas');
			var context = canvas.getContext('2d');

			var bird = Bird();

			var leftPress = false;
			var rightPress = false;

			// events
			window.addEventListener('keydown', function(event) {
				log('keydown')
				// log(event)
				var k = event.key;
				if (k == 'a') {
					leftPress = true;
				} else if (k == 'd') {
					rightPress = true;
				}
			});

			window.addEventListener('keyup', function(event) {
				log('keyup')
				// log(event)
				var k = event.key;
				if (k == 'a') {
					leftPress = false;
				} else if (k == 'd') {
					rightPress = false;
				}
			});

			setInterval(function() {
				if (leftPress) {
					bird.moveLeft();
				} else if (rightPress) {
					bird.moveRight();
				}
				context.clearRect(0, 0, canvas.width, canvas.height);
				context.drawImage(bird.image, bird.x, bird.y);
			}, 1000/30);
		}

		__main();

	</script>
</body>
</html>